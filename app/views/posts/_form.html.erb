<%= form_with model: post, local: true do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <%= video_tag post.movie.url, id: 'preview', size: '300x200', controls: true, autobuffer: true %>
  <div class="form-group">
    <%= f.label :movie, placeholder: "video"  %>
    <%= f.file_field :movie, id: :post_movie, class: 'form-control mb-3', accept: 'video/*', onchange: 'previewImage()' %>
    <%= f.hidden_field :movie_cache %>
  </div>
  <div class="form-group">
    <%= f.label :title %>
    <%= f.text_field :title, class: 'form-control mb-3' %>
  </div>
  <div class="form-group">
    <%= f.label :body %>
    <%= f.text_area :body, class: 'form-control mb-3', rows: 10 %>
  </div>

  <%= f.submit class: 'btn btn-primary' %>
<% end %>
<%= javascript_include_tag "preview.js" %>